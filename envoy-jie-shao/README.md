# Envoy 介绍

Envoy 是为现代服务架构设计的 L7 层代理，Envoy 自始至终的信念是：

> 网络对应用而言应该是透明的，当发生网络问题时，从应用外部就可以找到问题的根源。

Envoy 的特点如下：

**进程外架构**：Envoy 是一个单独的进程，它与一个或一组应用程序运行在一起，它们一起组成了一个网格，网格内部通过 `localhost` 进行通信，Envoy 把守网格的入口和出口，网格内部的应用程序并不了解外部的网络拓扑。这种进程外的体系结构有以下两个好处：

* 网格内部的应用程序可以使用任意类型的编程语言来编写，比如 Java、C++、Golang、Python 等。
* 传统服务面临的一个困难就是服务升级，而 Envoy 可以透明的在整个架构中部署和升级服务。

**C++ 编写**：Envoy 使用 C ++ 11 编写，在提供了极致性能的同时，也为开发人员提供了方便的构建与协作方式。

**L3/L4 流量代理**： Envoy 可以通过配置一系列的过滤器来代理 L3/L4 层的网络流量，比如代理原始的 TCP 、UDP流量，也可以代理 Redis、MognoDB、MySQL、Kafka 等流量。

**HTTP L7 流量代理**：除了代理 L3/L4 层的流量之外，Envoy 还可以代理 L7 层的 HTTP 流量。

**HTTP L7 路由**：Envoy 在代理 L7 层的 HTTP 流量时，还支持一个路由子系统，该子系统能够基于路径，权限，内容，Runtime 值等来路由和重定向请求。

**HTTP/2 支持**：Envoy 支持 HTTP/1.1 和 HTTP/2 ，推荐使用 HTTP/2 ，可以在请求和响应之间进行多路复用。

**gRPC 支持**：Envoy 原生支持 gRPC 流量代理，Envoy 自身的流量传输，比如 xDS ，也都是使用 gRPC 协议来完成的。

**TLS/SSL 支持**：Envoy 同时支持上游与下游的 TLS/SSL 认证，SDS 可以在 Envoy 运行期动态修改 Envoy 使用到的证书。

**xDS 动态服务发现**：Envoy 支持一组服务发现功能，统称为 xDS，可以在运行期免重启快速更新配置信息。

**负载均衡**：分布式系统中不同组件之间的负载均衡是一个复杂的问题，Envoy 自带了各种算法对网格内的应用程序进行负载均衡。

**上游集群管理**：网格内的应用程序就是 Envoy 的上游，Envoy 可以检查上游集群的运行时状况，检查结果会影响负载均衡；除此之外，还支持自定义断路器等功能。

**可观察性**：Envoy 支持自定义 Logging、Metrics、Tracing，可以对接各种分析工具，比如 Prometheus、ElasticSearch 等，帮助管理人员快速查找定位问题。

